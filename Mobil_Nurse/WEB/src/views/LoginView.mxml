<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
		xmlns:s="library://ns.adobe.com/flex/spark"
		xmlns:services="services.*"
		xmlns:valueObjects="valueObjects.*"
		xmlns:views="views.*"
		creationComplete="nursePass_creationCompleteHandler(event)" 
		title="Welcome - Please Login"
		backgroundColor= "#E3F2F2">
	
	
	<fx:Style source="style/style.css"/>
	<fx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
			
			import valueObjects.MyStocks;
			
			protected function nursePass_creationCompleteHandler(event:FlexEvent):void
			{
				getAllEmployeesResult2.token = myEmployees.getAllEmployees();
			}
			
			protected function login_clickHandler(event:MouseEvent):void
			{
				for each(var emp:Employee in getAllEmployeesResult2.lastResult) {
					if(emp.username == nurseName.text && emp.password == nursePass.text ){
						navigator.pushView(views.LoginSuccess, emp);	
					}else{
						errorText.text = "Wrong Username or Password";
					}
				}
			}
						
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<services:Employee1 id="myEmployees"/> 
		<s:CallResponder id="getAllResult"/>
		
		<valueObjects:Employee id="myNewEmployee"/>
		<s:CallResponder id="createEmployee"/>
		
		<valueObjects:Employee id="myEmployee"/>
		<s:CallResponder id="getAllEmployeesResult2"/>
	</fx:Declarations>
	
	<s:states>
		<s:State name="login"/>
		<s:State name="register"/>
	</s:states>
	
	<s:Label id="welcome" y="220" width="767" height="59" text="Welcome on Mobile Nurse"
			 x.login="1"
			 horizontalCenter="0"/>
	
	<s:BorderContainer id="container" x="0" width="100%" height="140"
					   y.login="320"
					   y.register="320" height.register="384">
		
		<s:VGroup y="31" width="664" x="56" horizontalCenter="0">
			<s:Label id="errorText" text="Please Login"/>
			<s:HGroup id="vgroup" width="660" height="51"
					  x="79" y="150">
				<s:TextInput id="nurseName" left="50%" width="200" text=""/>
				<s:TextInput id="nursePass" width="200" height="35" displayAsPassword="true"/>
				<s:Button id="loginBtn" width="95" height="34" label="Login"
						  click="login_clickHandler(event)"/>
				<s:Button id="registerBtn" width="130" height="34"
						  click="currentState='register'" label="New Account"
						  click.register="currentState='login'"/>
			</s:HGroup>
		</s:VGroup >	
		
		<views:RegisterView includeIn="register" y="120" horizontalCenter="-73">
			
		</views:RegisterView>
	</s:BorderContainer>
	
</s:View>
