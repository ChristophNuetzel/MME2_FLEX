<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
		xmlns:s="library://ns.adobe.com/flex/spark"
		xmlns:assets="assets.*"
		creationComplete="register()" 
		title="Communication"
		xmlns:mx="http://www.adobe.com/2009/mxml">
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<fx:Script>
		<![CDATA[
			import control.events.CheckBoxEvent;
			import control.events.StateTextFieldEvent;
			
			import mx.events.FlexEvent;
			
			public static const CHECK_EYE:String = "CheckEye";
			public static const CHECK_EAR:String = "CheckEar";
			public static const CHECK_SPEAK:String = "CheckSpeak";
			public static const CHECK_HAND:String = "CheckHand";
			public static const CHECK_PENCIL:String = "CheckPencil";
			
			public static const SET_PROBLEMS_EYE:String = "SetProbemsEye";
			public static const SET_PROBLEMS_EAR:String = "SetProbemsEar";
			public static const SET_PROBLEMS_SPEAK:String = "SetProbemsSpeak";
			public static const SET_PROBLEMS_HAND:String = "SetProbemsHand";
			public static const SET_PROBLEMS_PENCIL:String = "SetProbemsPencil";
			
			public static const GET_PROBLEM_FIELDS:String = "GetProblemFields";
			public static const GET_SOLUTION_FIELDS:String = "GetSolutionFields";
			public static const GET_TOOL_FIELDS:String = "GetToolFields";
			
			private function register():void {
				AppFacade.getInstance().removeMediator( CommunicationMediator.NAME );
				AppFacade.getInstance().registerMediator( new CommunicationMediator(this) );
				backgroundImage.visible = true;
				this.setElementIndex(back, 0);
			}
			
			
			protected function checkEye(event:MouseEvent):void
			{
				dispatchEvent( new CheckBoxEvent( CHECK_EYE , this.check_eye.selected));
			}
			
			protected function checkEar(event:MouseEvent):void
			{
				dispatchEvent( new CheckBoxEvent( CHECK_EAR , this.check_ear.selected ));
			}
			
			protected function checkSpeak(event:MouseEvent):void
			{
				dispatchEvent( new CheckBoxEvent( CHECK_SPEAK, this.check_speak.selected));	
			}
			
			protected function checkHand(event:MouseEvent):void
			{
				dispatchEvent( new CheckBoxEvent( CHECK_HAND, this.check_hand.selected));				
			}
			
			protected function checkPencil(event:MouseEvent):void
			{
				dispatchEvent( new CheckBoxEvent( CHECK_PENCIL, this.check_pencil.selected ));
			}
			
			//init
			protected function initProblemTextFields(event:FlexEvent):void
			{
				dispatchEvent( new Event( GET_PROBLEM_FIELDS ) );
			}
			
			protected function initSolutionTextFields(event:FlexEvent):void
			{
				dispatchEvent( new Event( GET_SOLUTION_FIELDS ) );	
			}
			
			protected function initToolTextFields(event:FlexEvent):void
			{
				dispatchEvent( new Event( GET_TOOL_FIELDS ) );
			}
			
			// setter
			protected function setProblemsEye(event:KeyboardEvent):void
			{
				dispatchEvent( new StateTextFieldEvent( SET_PROBLEMS_EYE, this.problemsEye));	
			}
			
			protected function setProblemsEar(event:KeyboardEvent):void
			{
				dispatchEvent( new StateTextFieldEvent( SET_PROBLEMS_EAR, this.problemsEar));
			}
			
			protected function setProblemsSpeak(event:KeyboardEvent):void
			{
				dispatchEvent( new StateTextFieldEvent( SET_PROBLEMS_SPEAK, this.problemsSpeak));				
			}
			
			protected function setProblemsHand(event:KeyboardEvent):void
			{
				dispatchEvent( new StateTextFieldEvent( SET_PROBLEMS_HAND, this.problemsHand));				
			}
			
			protected function setProblemsPencil(event:KeyboardEvent):void
			{
				dispatchEvent( new StateTextFieldEvent( SET_PROBLEMS_PENCIL, this.problemsPencil));
			}
		]]>
	</fx:Script>
	
	<s:states>
		<s:State name="ressourcen" id="ressourcen"/>
		<s:State name="problems" id="problems" enterState="initProblemTextFields(event)"/>
		<s:State name="solutions" id="solutions" enterState="initSolutionTextFields(event)"/>
		<s:State name="tools" id="tools" enterState="initToolTextFields(event)"/>
	</s:states>
	
	<s:Group id="back"
			 height.problems="660"
			 height.ressourcen="660"
			 height.solutions="660"
			 height.tools="660">
		<s:BitmapImage id="backgroundImage" visible="false" left="0" right="0" top="0" bottom="0"
					   depth="0" smooth="true" source="@Embed('assets/ruledpaperwithheader.png')"/>
		<s:VGroup includeIn="problems" x="-1" y="134" width="690" contentBackgroundAlpha="0">
			<s:HGroup width="669">
				<s:Image width="156" height="103" source="@Embed(source='assets/eye.png')"/>
				<s:TextArea id="problemsEye" width="294" height="55" keyUp="setProblemsEye(event)"/>
			</s:HGroup>
			
			<s:HGroup width="479">
				<s:Image x="287" y="189" width="128" height="88" source="@Embed(source='assets/ear.png')"/>
				<s:TextArea id="problemsEar" width="214" height="51" keyUp="setProblemsEar(event)"/>
			</s:HGroup>
			
			<s:HGroup width="478">
				<s:Image x="499" y="191" width="113" height="73" source="@Embed(source='assets/nose.png')"/>
				<s:TextArea id="problemsSpeak" width="214" height="51" keyUp="setProblemsSpeak(event)"/>
			</s:HGroup>
			
			<s:HGroup width="478">
				<s:TextArea id="problemsHand" width="214" height="51" keyUp="setProblemsHand(event)"/>
			</s:HGroup>
			
			<s:HGroup width="478">
				<s:TextArea id="problemsPencil" width="214" height="51" keyUp="setProblemsPencil(event)"/>
			</s:HGroup>
		</s:VGroup>
	</s:Group>
	
	<s:HGroup y="25" width="550" height="26" x="35" horizontalCenter="-90">
		<s:Label fontSize="22" text="Ressourcen" paddingLeft="10" paddingRight="10"
				 click="currentState='ressourcen'" backgroundColor.ressourcen="#EFEFEF"/>
		
		<s:Label fontSize="22" text="Problems" paddingLeft="10" paddingRight="10"
				 click="currentState='problems'" backgroundColor.problems="#EFEFEF" />
		
		<s:Label fontSize="22" text="Solutions" paddingLeft="10" paddingRight="10"
				 click="currentState='solutions'" backgroundColor.solutions="#EFEFEF"/>
		<s:Label fontSize="22" text="Tools" paddingLeft="10" paddingRight="10"
				 click="currentState='tools'" backgroundColor.tools="#EFEFEF"/>
	</s:HGroup>

	<s:Group includeIn="ressourcen" x="0" y="0" width="100%" height="663">
		
		<s:Group x="40" y="121" width="671" height="509">
			<s:VGroup x="33" y="10" width="63" height="73">
				<s:CheckBox click="checkEye(event)" id="check_eye"/>
				<s:Image width="61" height="42" source="@Embed(source='assets/eye.png')"/>
			</s:VGroup>
			<s:VGroup x="33" y="110" height="90">
				<s:CheckBox click="checkSpeak(event)" id="check_speak"/>
				<s:Image x="499" y="191" width="68" height="54" source="@Embed(source='assets/nose.png')"/>
			</s:VGroup>
			<s:VGroup x="33" y="208" height="104">
				<s:CheckBox click="checkEar(event)" id="check_ear"/>
				<s:Image x="287" y="189" width="79" height="63" source="@Embed(source='assets/ear.png')"/>
			</s:VGroup>
			<s:CheckBox id="check_hand" x="33" y="320" label="hand" click="checkHand(event)"/>
			<s:CheckBox id="check_pencil" x="37" y="401" label="pencil" click="checkPencil(event)"/>
		</s:Group>
		
	</s:Group>
	
	<s:VGroup includeIn="solutions" x="16" y="132" width="478">
		<s:HGroup width="479">
			<s:Image width="156" height="103" source="@Embed(source='assets/eye.png')"/>
			<s:TextArea id="solutionEye" width="214" height="55"/>
		</s:HGroup>
		
		<s:HGroup width="479">
			<s:Image x="287" y="189" width="128" height="88" source="@Embed(source='assets/ear.png')"/>
			<s:TextArea id="solutionEar" width="214" height="51"/>
		</s:HGroup>
		
		<s:HGroup width="478">
			<s:Image x="499" y="191" width="113" height="73" source="@Embed(source='assets/nose.png')"/>
			<s:TextArea id="solutionSpeak" width="214" height="51"/>
		</s:HGroup>
		
		<s:HGroup width="478">
			<s:TextArea id="solutionHand" width="214" height="51"/>
		</s:HGroup>
		
		<s:HGroup width="478">
			<s:TextArea id="solutionPencil" width="214" height="51"/>
		</s:HGroup>
	</s:VGroup>
	
	<s:VGroup includeIn="tools" x="16" y="132" width="478">
		<s:HGroup width="479">
			<s:Image width="156" height="103" source="@Embed(source='assets/eye.png')"/>
			<s:TextArea id="toolsEye" width="214" height="55"/>
		</s:HGroup>
		
		<s:HGroup width="479">
			<s:Image x="287" y="189" width="128" height="88" source="@Embed(source='assets/ear.png')"/>
			<s:TextArea id="toolsEar" width="214" height="51"/>
		</s:HGroup>
		
		<s:HGroup width="478">
			<s:Image x="499" y="191" width="113" height="73" source="@Embed(source='assets/nose.png')"/>
			<s:TextArea id="toolsSpeak" width="214" height="51"/>
		</s:HGroup>
		
		<s:HGroup width="478">
			<s:TextArea id="toolsHand" width="214" height="51"/>
		</s:HGroup>
		
		<s:HGroup width="478">
			<s:TextArea id="toolsPencil" width="214" height="51"/>
		</s:HGroup>
	</s:VGroup>
	

</s:View>
